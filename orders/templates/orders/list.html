{% extends 'catalog/base.html' %}

{% block title %}–ú–æ–∏ –∑–∞–∫–∞–∑—ã{% endblock %}
{% block page_title %}–ú–æ–∏ –∑–∞–∫–∞–∑—ã{% endblock %}

{% block content %}
<div style="max-width: 1200px; margin: 0 auto; padding: 20px;">
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
        <div>
            <h2 style="margin: 0; color: #333;">–ú–æ–∏ –∑–∞–∫–∞–∑—ã</h2>
            <p style="color: #666; margin: 5px 0 0 0;">–ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –≤–∞—à–∏—Ö –∑–∞–∫–∞–∑–æ–≤</p>
        </div>
        
        <div style="display: flex; gap: 15px;">
            <a href="{% url 'users:profile' %}" 
               style="padding: 10px 20px; background-color: #3498db; color: white; text-decoration: none; 
                      border-radius: 6px; font-weight: bold; font-size: 14px;">
                ‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –ø—Ä–æ—Ñ–∏–ª—å
            </a>
            <a href="{% url 'catalog:product_list' %}" 
               style="padding: 10px 20px; background-color: #2ecc71; color: white; text-decoration: none; 
                      border-radius: 6px; font-weight: bold; font-size: 14px;">
                üõçÔ∏è –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ–∫—É–ø–∫–∏
            </a>
        </div>
    </div>
    
    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–∫–∞–∑–æ–≤ -->
    {% if orders %}
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px;">
        <div style="background-color: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); text-align: center;">
            <div style="font-size: 32px; font-weight: bold; color: #3498db;">{{ orders|length }}</div>
            <div style="color: #666; font-size: 14px;">–í—Å–µ–≥–æ –∑–∞–∫–∞–∑–æ–≤</div>
        </div>
        
        <div style="background-color: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); text-align: center;">
            <div style="font-size: 32px; font-weight: bold; color: #27ae60;">{{ completed_orders }}</div>
            <div style="color: #666; font-size: 14px;">–í—ã–ø–æ–ª–Ω–µ–Ω–æ</div>
        </div>
        
        <div style="background-color: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); text-align: center;">
            <div style="font-size: 32px; font-weight: bold; color: #f39c12;">{{ in_progress_orders }}</div>
            <div style="color: #666; font-size: 14px;">–í –æ–±—Ä–∞–±–æ—Ç–∫–µ</div>
        </div>
        
        <div style="background-color: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); text-align: center;">
            <div style="font-size: 32px; font-weight: bold; color: #e74c3c;">{{ canceled_orders }}</div>
            <div style="color: #666; font-size: 14px;">–û—Ç–º–µ–Ω–µ–Ω–æ</div>
        </div>
    </div>
    {% endif %}
    
    <!-- –°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤ -->
    <div style="background-color: white; border-radius: 10px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
        {% if orders %}
        <div style="overflow-x: auto;">
            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="background-color: #f8f9fa;">
                        <th style="padding: 20px; text-align: left; border-bottom: 2px solid #dee2e6; color: #333; font-weight: bold;">–ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞</th>
                        <th style="padding: 20px; text-align: left; border-bottom: 2px solid #dee2e6; color: #333; font-weight: bold;">–î–∞—Ç–∞</th>
                        <th style="padding: 20px; text-align: left; border-bottom: 2px solid #dee2e6; color: #333; font-weight: bold;">–°—É–º–º–∞</th>
                        <th style="padding: 20px; text-align: left; border-bottom: 2px solid #dee2e6; color: #333; font-weight: bold;">–°—Ç–∞—Ç—É—Å</th>
                        <th style="padding: 20px; text-align: left; border-bottom: 2px solid #dee2e6; color: #333; font-weight: bold;">–û–ø–ª–∞—Ç–∞</th>
                    </tr>
                </thead>
                <tbody>
                    {% for order in orders %}
                    <tr style="border-bottom: 1px solid #eee; transition: background-color 0.3s;" 
                        onmouseover="this.style.backgroundColor='#f9f9f9'" 
                        onmouseout="this.style.backgroundColor='white'">
                        <td style="padding: 20px;">
                            <div style="font-weight: bold; font-size: 16px; color: #333;">{{ order.number }}</div>
                            <div style="color: #666; font-size: 14px; margin-top: 5px;">
                                {% with order.items.count as item_count %}
                                {{ item_count }} —Ç–æ–≤–∞—Ä{{ item_count|pluralize:"–∞,–æ–≤" }}
                                {% endwith %}
                            </div>
                        </td>
                        
                        <td style="padding: 20px;">
                            <div style="font-weight: bold; color: #333;">{{ order.created|date:"d.m.Y" }}</div>
                            <div style="color: #666; font-size: 14px;">{{ order.created|date:"H:i" }}</div>
                        </td>
                        
                        <td style="padding: 20px;">
                            <div style="font-size: 18px; font-weight: bold; color: #e74c3c;">{{ order.total }} ‚ÇΩ</div>
                        </td>
                        
                        <td style="padding: 20px;">
                            <span style="display: inline-block; padding: 8px 16px; border-radius: 20px; font-weight: bold; font-size: 14px;
                                    {% if order.status == 'new' %}background-color: #3498db; color: white;
                                    {% elif order.status == 'confirmed' %}background-color: #f39c12; color: white;
                                    {% elif order.status == 'sent' %}background-color: #9b59b6; color: white;
                                    {% elif order.status == 'done' %}background-color: #27ae60; color: white;
                                    {% elif order.status == 'canceled' %}background-color: #e74c3c; color: white;
                                    {% else %}background-color: #95a5a6; color: white;{% endif %}">
                                {{ order.get_status_display }}
                            </span>
                            {% if order.is_paid %}
                            <div style="margin-top: 5px;">
                                <span style="color: #27ae60; font-size: 13px; font-weight: bold;">‚úì –û–ø–ª–∞—á–µ–Ω</span>
                            </div>
                            {% endif %}
                        </td>
                        
                        <td style="padding: 20px;">
                            <div style="color: #333; font-weight: bold;">{{ order.get_payment_display }}</div>
                            <div style="color: #666; font-size: 14px; margin-top: 5px;">
                                {% if order.is_paid %}
                                    <span style="color: #27ae60;">–û–ø–ª–∞—á–µ–Ω</span>
                                    {% if order.paid_date %}
                                    <br><small>{{ order.paid_date|date:"d.m.Y" }}</small>
                                    {% endif %}
                                {% else %}
                                    <span style="color: #e74c3c;">–ù–µ –æ–ø–ª–∞—á–µ–Ω</span>
                                {% endif %}
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        
        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –µ—Å–ª–∏ –∑–∞–∫–∞–∑–æ–≤ –Ω–µ—Ç -->
        {% else %}
        <div style="text-align: center; padding: 60px 20px;">
            <div style="font-size: 60px; color: #ddd; margin-bottom: 20px;">üì¶</div>
            <h3 style="color: #666; margin-bottom: 15px;">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–∫–∞–∑–æ–≤</h3>
            <p style="color: #999; max-width: 500px; margin: 0 auto 30px; line-height: 1.6;">
                –°–¥–µ–ª–∞–π—Ç–µ —Å–≤–æ–π –ø–µ—Ä–≤—ã–π –∑–∞–∫–∞–∑ –∏ –æ–Ω –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å. –í—ã —Å–º–æ–∂–µ—Ç–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å, 
                –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –¥–µ—Ç–∞–ª–∏ –∏ –∏—Å—Ç–æ—Ä–∏—é –≤—Å–µ—Ö –≤–∞—à–∏—Ö –ø–æ–∫—É–ø–æ–∫.
            </p>
            <div style="display: flex; gap: 15px; justify-content: center;">
                <a href="{% url 'catalog:product_list' %}" 
                   style="display: inline-block; padding: 12px 30px; background-color: #3498db; 
                          color: white; text-decoration: none; border-radius: 6px; font-weight: bold;">
                    üõçÔ∏è –ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥
                </a>
                <a href="{% url 'users:profile' %}" 
                   style="display: inline-block; padding: 12px 30px; background-color: #2ecc71; 
                          color: white; text-decoration: none; border-radius: 6px; font-weight: bold;">
                    ‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –ø—Ä–æ—Ñ–∏–ª—å
                </a>
            </div>
        </div>
        {% endif %}
    </div>
    
    <!-- –ü–æ–¥—Å–∫–∞–∑–∫–∏ -->
    {% if orders %}
    <div style="margin-top: 30px; display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
        <div style="background-color: #e8f4fc; padding: 20px; border-radius: 8px; border-left: 4px solid #3498db;">
            <h4 style="margin-top: 0; color: #0c5460;">üìû –°–≤—è–∑—å —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π</h4>
            <p style="color: #666; margin-bottom: 10px; font-size: 14px;">
                –ï—Å—Ç—å –≤–æ–ø—Ä–æ—Å—ã –ø–æ –∑–∞–∫–∞–∑—É? –°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏:
            </p>
            <ul style="color: #666; font-size: 14px; padding-left: 20px; margin: 0;">
                <li>–¢–µ–ª–µ—Ñ–æ–Ω: <strong>8-800-555-55-55</strong></li>
                <li>Email: <strong>support@example.com</strong></li>
                <li>–ß–∞—Å—ã —Ä–∞–±–æ—Ç—ã: 9:00-18:00 (–ü–Ω-–ü—Ç)</li>
            </ul>
        </div>
        
        <div style="background-color: #fef7e0; padding: 20px; border-radius: 8px; border-left: 4px solid #f39c12;">
            <h4 style="margin-top: 0; color: #856404;">‚ÑπÔ∏è –°—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–æ–≤</h4>
            <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px;">
                <span style="padding: 5px 10px; background-color: #3498db; color: white; border-radius: 12px; font-size: 12px;">–ù–æ–≤—ã–π</span>
                <span style="padding: 5px 10px; background-color: #f39c12; color: white; border-radius: 12px; font-size: 12px;">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω</span>
                <span style="padding: 5px 10px; background-color: #9b59b6; color: white; border-radius: 12px; font-size: 12px;">–û—Ç–ø—Ä–∞–≤–ª–µ–Ω</span>
                <span style="padding: 5px 10px; background-color: #27ae60; color: white; border-radius: 12px; font-size: 12px;">–í—ã–ø–æ–ª–Ω–µ–Ω</span>
            </div>
        </div>
    </div>
    {% endif %}
</div>

<style>
    /* –°—Ç–∏–ª–∏ –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã */
    table {
        min-width: 700px;
    }
    
    th, td {
        vertical-align: middle;
    }
    
    /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
    @media (max-width: 768px) {
        .order-header {
            flex-direction: column;
            gap: 15px;
            align-items: flex-start;
        }
        
        .order-header div:last-child {
            align-self: stretch;
        }
        
        .order-header a {
            width: 100%;
            text-align: center;
        }
    }
</style>
{% endblock %}