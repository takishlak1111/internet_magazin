{% extends 'catalog/base.html' %}

{% block title %}–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞{% endblock %}
{% block page_title %}–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞{% endblock %}

{% block content %}
<div style="max-width: 1000px; margin: 0 auto; padding: 20px;">
    <h2 style="text-align: center; margin-bottom: 30px; color: #333;">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h2>
    
    {% if messages %}
    <div style="margin-bottom: 30px;">
        {% for message in messages %}
        <div style="padding: 12px; border-radius: 4px; margin-bottom: 10px;
                    {% if message.tags == 'success' %}background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb;
                    {% elif message.tags == 'error' %}background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb;
                    {% else %}background-color: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb;{% endif %}">
            {{ message }}
        </div>
        {% endfor %}
    </div>
    {% endif %}
    
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px;">
        <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –§–æ—Ä–º–∞ –∑–∞–∫–∞–∑–∞ -->
        <div>
            <div style="background-color: white; padding: 25px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                <h3 style="margin-top: 0; margin-bottom: 25px; color: #333; border-bottom: 2px solid #3498db; padding-bottom: 10px;">
                    üìù –î–∞–Ω–Ω—ã–µ –¥–ª—è –∑–∞–∫–∞–∑–∞
                </h3>
                
                <form method="post">
                    {% csrf_token %}
                    
                    <!-- –§–ò–û -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: bold; color: #333;">
                            –§–ò–û <span style="color: red;">*</span>
                        </label>
                        {{ form.full_name }}
                        {% if form.full_name.errors %}
                        <div style="color: #e74c3c; font-size: 14px; margin-top: 5px;">
                            {% for error in form.full_name.errors %}{{ error }}{% endfor %}
                        </div>
                        {% endif %}
                    </div>
                    
                    <!-- Email -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: bold; color: #333;">
                            Email <span style="color: red;">*</span>
                        </label>
                        {{ form.email }}
                        {% if form.email.errors %}
                        <div style="color: #e74c3c; font-size: 14px; margin-top: 5px;">
                            {% for error in form.email.errors %}{{ error }}{% endfor %}
                        </div>
                        {% endif %}
                    </div>
                    
                    <!-- –¢–µ–ª–µ—Ñ–æ–Ω -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: bold; color: #333;">
                            –¢–µ–ª–µ—Ñ–æ–Ω <span style="color: red;">*</span>
                        </label>
                        {{ form.phone }}
                        {% if form.phone.errors %}
                        <div style="color: #e74c3c; font-size: 14px; margin-top: 5px;">
                            {% for error in form.phone.errors %}{{ error }}{% endfor %}
                        </div>
                        {% endif %}
                        <small style="color: #666; font-size: 12px; display: block; margin-top: 5px;">
                            –ü—Ä–∏–º–µ—Ä: +7 (999) 123-45-67
                        </small>
                    </div>
                    
                    <!-- –ê–¥—Ä–µ—Å -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: bold; color: #333;">
                            –ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏ <span style="color: red;">*</span>
                        </label>
                        {{ form.address }}
                        {% if form.address.errors %}
                        <div style="color: #e74c3c; font-size: 14px; margin-top: 5px;">
                            {% for error in form.address.errors %}{{ error }}{% endfor %}
                        </div>
                        {% endif %}
                        <small style="color: #666; font-size: 12px; display: block; margin-top: 5px;">
                            –£–∫–∞–∂–∏—Ç–µ –ø–æ–ª–Ω—ã–π –∞–¥—Ä–µ—Å –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏
                        </small>
                    </div>
                    
                    <!-- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π -->
                    
                    
                    <!-- –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã -->
                    <div style="margin-bottom: 30px;">
                        <label style="display: block; margin-bottom: 8px; font-weight: bold; color: #333;">
                            –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã <span style="color: red;">*</span>
                        </label>
                        <div style="display: flex; flex-direction: column; gap: 10px;">
                            {% for choice in form.payment.field.choices %}
                            <label style="display: flex; align-items: center; gap: 10px; padding: 12px; border: 1px solid #ddd; border-radius: 6px; cursor: pointer;">
                                <input type="radio" name="payment" value="{{ choice.0 }}" 
                                       {% if form.payment.value == choice.0 %}checked{% endif %}
                                       style="width: 18px; height: 18px;">
                                <div>
                                    <strong>{{ choice.1 }}</strong>
                                    {% if choice.0 == 'cash' %}
                                    <div style="color: #666; font-size: 13px; margin-top: 3px;">–û–ø–ª–∞—Ç–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏</div>
                                    {% elif choice.0 == 'card' %}
                                    <div style="color: #666; font-size: 13px; margin-top: 3px;">–ö–∞—Ä—Ç–æ–π –∫—É—Ä—å–µ—Ä—É</div>
                                    {% elif choice.0 == 'online' %}
                                    <div style="color: #666; font-size: 13px; margin-top: 3px;">–û–Ω–ª–∞–π–Ω-–æ–ø–ª–∞—Ç–∞</div>
                                    {% endif %}
                                </div>
                            </label>
                            {% endfor %}
                        </div>
                        {% if form.payment.errors %}
                        <div style="color: #e74c3c; font-size: 14px; margin-top: 5px;">
                            {% for error in form.payment.errors %}{{ error }}{% endfor %}
                        </div>
                        {% endif %}
                    </div>
                    
                    <!-- –ö–Ω–æ–ø–∫–∏ -->
                    <div style="display: flex; gap: 15px; margin-top: 30px;">
                        <a href="{% url 'users:profile' %}" 
                           style="flex: 1; padding: 14px; background-color: #95a5a6; color: white; text-align: center; 
                                  border-radius: 6px; text-decoration: none; font-weight: bold; font-size: 16px;">
                            ‚Üê –û—Ç–º–µ–Ω–∞
                        </a>
                        <button type="submit" 
                                style="flex: 2; padding: 14px; background-color: #27ae60; color: white; border: none; 
                                       border-radius: 6px; font-size: 16px; font-weight: bold; cursor: pointer; transition: background-color 0.3s;">
                            üì¶ –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑
                        </button>
                    </div>
                    
                    <div style="margin-top: 20px; text-align: center;">
                        <small style="color: #666;">
                            –ù–∞–∂–∏–º–∞—è –∫–Ω–æ–ø–∫—É, –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å 
                            <a href="#" style="color: #3498db;">–ø—Ä–∞–≤–∏–ª–∞–º–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–∫–∞–∑–æ–≤</a>
                        </small>
                    </div>
                </form>
            </div>
        </div>
        
        <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –î–µ—Ç–∞–ª–∏ –∑–∞–∫–∞–∑–∞ -->
        <div>
            <div style="background-color: white; padding: 25px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                <h3 style="margin-top: 0; margin-bottom: 25px; color: #333; border-bottom: 2px solid #e74c3c; padding-bottom: 10px;">
                    üõí –í–∞—à –∑–∞–∫–∞–∑
                </h3>
                
                <!-- –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ -->
                <div style="margin-bottom: 25px;">
                    <h4 style="margin-bottom: 15px; color: #333;">–¢–æ–≤–∞—Ä—ã –≤ –∑–∞–∫–∞–∑–µ ({{ items|length }})</h4>
                    
                    <div style="max-height: 300px; overflow-y: auto; padding-right: 10px;">
                        {% for item in items %}
                        <div style="display: flex; gap: 15px; padding: 15px 0; border-bottom: 1px solid #eee;">
                            <div style="width: 60px; height: 60px; background-color: #f5f5f5; border-radius: 6px; 
                                        display: flex; align-items: center; justify-content: center;">
                                {% if item.product.image %}
                                <img src="{{ item.product.image.url }}" alt="{{ item.product.product_name }}" 
                                     style="max-width: 100%; max-height: 100%; border-radius: 4px;">
                                {% else %}
                                <span style="color: #999; font-size: 11px;">–ù–µ—Ç —Ñ–æ—Ç–æ</span>
                                {% endif %}
                            </div>
                            
                            <div style="flex: 1;">
                                <div style="font-weight: bold; margin-bottom: 5px; font-size: 15px;">
                                    {{ item.product.product_name }}
                                </div>
                                <div style="color: #666; font-size: 13px;">
                                    –ë—Ä–µ–Ω–¥: {{ item.product.brand.name|default:"–ù–µ —É–∫–∞–∑–∞–Ω" }}
                                </div>
                            </div>
                            
                            <div style="text-align: right;">
                                <div style="font-weight: bold; color: #e74c3c; font-size: 16px;">
                                    {{ item.total }} ‚ÇΩ
                                </div>
                                <div style="color: #666; font-size: 14px;">
                                    {{ item.product.price }} ‚ÇΩ √ó {{ item.quantity }} —à—Ç.
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                
                <!-- –ò—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞ -->
                <div style="background-color: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 25px;">
                    <h4 style="margin-top: 0; margin-bottom: 15px; color: #333;">–°—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞–∫–∞–∑–∞</h4>
                    
                    <div style="margin-bottom: 10px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <span style="color: #666;">–¢–æ–≤–∞—Ä—ã ({{ items|length }})</span>
                            <span style="font-weight: bold;">{{ cart.total }} ‚ÇΩ</span>
                        </div>
                        
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <span style="color: #666;">–î–æ—Å—Ç–∞–≤–∫–∞</span>
                            <span style="color: #27ae60; font-weight: bold;">–ë–µ—Å–ø–ª–∞—Ç–Ω–æ</span>
                        </div>
                        
                        <hr style="border: none; border-top: 1px dashed #ddd; margin: 15px 0;">
                        
                        <div style="display: flex; justify-content: space-between; font-size: 20px; font-weight: bold; color: #e74c3c;">
                            <span>–ò—Ç–æ–≥–æ –∫ –æ–ø–ª–∞—Ç–µ</span>
                            <span>{{ cart.total }} ‚ÇΩ</span>
                        </div>
                    </div>
                </div>
                
                <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ -->
                <div style="background-color: #e8f4fc; padding: 15px; border-radius: 8px; border-left: 4px solid #3498db;">
                    <div style="display: flex; align-items: flex-start; gap: 10px;">
                        <div style="font-size: 20px;">üì¶</div>
                        <div>
                            <div style="font-weight: bold; color: #0c5460; margin-bottom: 5px;">–°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞: <span style="color: #3498db;">–ù–æ–≤—ã–π</span></div>
                            <div style="color: #666; font-size: 14px;">
                                –ü–æ—Å–ª–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ —Å –≤–∞–º–∏ —Å–≤—è–∂–µ—Ç—Å—è –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid #eee;">
                    <h5 style="margin-bottom: 10px; color: #666;">–ß—Ç–æ –±—É–¥–µ—Ç –¥–∞–ª—å—à–µ?</h5>
                    <ol style="padding-left: 20px; color: #666; font-size: 14px;">
                        <li style="margin-bottom: 8px;">–í—ã –ø–æ–ª—É—á–∏—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –Ω–∞ email</li>
                        <li style="margin-bottom: 8px;">–ù–∞—à –º–µ–Ω–µ–¥–∂–µ—Ä —Å–≤—è–∂–µ—Ç—Å—è –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π</li>
                        <li style="margin-bottom: 8px;">–ó–∞–∫–∞–∑ –±—É–¥–µ—Ç —Å–æ–±—Ä–∞–Ω –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤–∞–º</li>
                        <li>–í—ã —Å–º–æ–∂–µ—Ç–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    input[type="text"], input[type="email"], input[type="tel"], textarea, select {
        width: 100%;
        padding: 12px 15px;
        border: 1px solid #ddd;
        border-radius: 6px;
        font-size: 16px;
        box-sizing: border-box;
        transition: border-color 0.3s;
    }
    
    input[type="text"]:focus, input[type="email"]:focus, input[type="tel"]:focus, textarea:focus, select:focus {
        border-color: #3498db;
        outline: none;
        box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
    }
    
    textarea {
        resize: vertical;
        min-height: 100px;
    }
    
    input[type="radio"] {
        accent-color: #3498db;
    }
    
    label[for^="id_"] {
        display: block;
        margin-bottom: 8px;
    }
    
    button[type="submit"]:hover {
        background-color: #219653 !important;
    }
    
    /* –°—Ç–∏–ª–∏ –¥–ª—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ */
    ::-webkit-scrollbar {
        width: 6px;
    }
    
    ::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 3px;
    }
    
    ::-webkit-scrollbar-thumb {
        background: #c1c1c1;
        border-radius: 3px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
        background: #a8a8a8;
    }
</style>
{% endblock %}